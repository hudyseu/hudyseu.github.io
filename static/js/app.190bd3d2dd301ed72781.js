webpackJsonp([1],{"/KGY":function(e,t){},CGAw:function(e,t){},JQVn:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("aFK5"),a=n.n(i),r=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},o,!1,function(e){n("/KGY")},null,null).exports,l=n("/ocq"),c=n("16po"),d={props:{info:Object},data:function(){return{thumb:this.info.thumb}},methods:{cellClicked:function(){this.$router.push("/article/"+this.info.sid)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell-container",on:{click:e.cellClicked}},[n("div",{staticClass:"cell-icon",style:{background:"url("+e.thumb+") no-repeat","background-size":"100% 100%"}}),e._v(" "),n("div",{staticClass:"cell-info"},[n("div",{staticClass:"cell-title",domProps:{innerHTML:e._s(e.info.title)}}),e._v(" "),n("div",{staticClass:"cell-subtitle",domProps:{innerHTML:e._s(e.info.summary)}}),e._v(" "),n("div",{staticClass:"cell-date",domProps:{innerHTML:e._s(e.info.inputtime)}})])])},staticRenderFns:[]};var f=n("VU/8")(d,u,!1,function(e){n("emk+")},null,null).exports,p=new r.default,m=n("mtWM"),h=n.n(m);h.a.defaults.withCredentials=!0;function v(e){return/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(e.url)?e.url:"http://api.turling.me/api/"+e.url}function g(e,t){e.then(function(e){e&&e.data?t.success&&t.success(e.data):t.error&&t.error(e)}).catch(function(e){t.error&&t.error(e)})}var _=function(e){g(h.a.get(v(e),{params:e.params}),e)};var C={name:"cnbeta-homepage",data:function(){return{articleList:[],paginationInfo:{current_page:1,total_page:0,page_size:35},selectedPage:1,refreshBtn:null}},components:{Pagination:c.Pagination,ArticleCell:f},methods:{getArticleList:function(e){var t=this;_({url:"timeline",params:{page:e||this.selectedPage},success:function(e){t.refreshBtn.$stopLoading(),"200"===e.status_code.toString()?(t.articleList=e.result.list,t.paginationInfo=e.result.pagination):t.$toast({text:"请求出错",duration:2e3})},error:function(){t.refreshBtn.$stopLoading(),t.$toast({text:"网络错误！",duration:2e3})}})},didChangePage:function(e){this.selectedPage=e,this.getArticleList()}},mounted:function(){this.getArticleList()}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"article-list"},e._l(e.articleList,function(e){return n("article-cell",{key:e.sid,attrs:{info:e}})}),1),e._v(" "),e.articleList.length?n("div",{staticClass:"pagination"},[n("pagination",{attrs:{givenPageCount:e.paginationInfo.total_page,givenCurrentPage:Number(e.paginationInfo.current_page),didChangePage:e.didChangePage}})],1):e._e()])},staticRenderFns:[]};var b=n("VU/8")(C,$,!1,function(e){n("gics")},null,null).exports,y=n("Gu7T"),L=n.n(y),P=n("mvHQ"),k=n.n(P),A=n("rdLu"),x={name:"PhoneCell",props:{info:Object},data:function(){return{thumb:this.info.thumb}},methods:{cellClicked:function(){this.$router.push("/article/"+this.info.sid)}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"phone-cell-container",on:{click:e.cellClicked}},[n("div",{staticClass:"cell-icon",style:{background:"url("+e.thumb+") no-repeat","background-size":"100% 100%"}}),e._v(" "),n("div",{staticClass:"cell-info"},[n("div",{staticClass:"cell-title",domProps:{innerHTML:e._s(e.info.title)}}),e._v(" "),n("div",{staticClass:"cell-date",domProps:{innerHTML:e._s(e.info.inputtime)}})])])},staticRenderFns:[]};var E={name:"Home",data:function(){return{articleList:[],paginationInfo:{current_page:1,total_page:0,page_size:35},selectedPage:1,refreshBtn:null}},components:{PhoneCell:n("VU/8")(x,w,!1,function(e){n("cFPm")},null,null).exports},methods:{getArticleList:function(e){var t=this,n=this.articleList[this.articleList.length-1];console.log(k()(n)),_({url:"timeline",params:{last_sid:this.articleList.length?n.sid:0},success:function(e){t.refreshBtn.$stopLoading(),"200"===e.status_code.toString()?(t.articleList=[].concat(L()(t.articleList),L()(e.result)),t.paginationInfo=e.result.pagination):t.$toast({text:"请求出错",duration:2e3})},error:function(){t.refreshBtn.$stopLoading(),t.$toast({text:"网络错误！",duration:2e3})}})}},mounted:function(){var e=this;this.refreshBtn=this.$showRefresh(),p.$on("onRefresh",function(){document.documentElement.scrollTop=0,e.selectedPage=1,e.articleList=[],e.getArticleList()}),this.getArticleList()},activated:function(){var e=this;this.refreshBtn&&this.refreshBtn.$appear(),document.body.onscroll=A.throttle(function(){(document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)+document.body.offsetHeight>=document.body.scrollHeight&&(e.selectedPage=e.selectedPage+1,e.getArticleList())},500)},deactivated:function(){this.refreshBtn.$disappear(),document.body.onscroll=null},beforeDestroy:function(){this.refreshBtn.$remove(),p.$off("onRefresh")}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-content"},[t("div",{staticClass:"article-list"},this._l(this.articleList,function(e){return t("phone-cell",{key:e.sid,attrs:{info:e}})}),1)])},staticRenderFns:[]};var T=n("VU/8")(E,N,!1,function(e){n("JQVn")},null,null).exports;function H(){for(var e=document.getElementsByTagName("embed"),t=e.length-1;t>=0;t--){if((c=(l=e[t]).src).indexOf("youku.com")>-1)if(a=c.match(/sid\/(\w+)/i)){var n="http://player.youku.com/embed/"+a[1];(d=document.createElement("iframe")).src=n,l.parentNode.replaceChild(d,l)}else{var i=u();l.parentNode.replaceChild(i,l)}else if(c.indexOf("qq.com")>-1){if(a=c.match(/vid=(\S*)&/i)){n="https://v.qq.com/iframe/player.html?vid="+a[1]+"&tiny=0&auto=0";(d=document.createElement("iframe")).src=n,l.parentNode.replaceChild(d,l)}else{i=u();l.parentNode.replaceChild(i,l)}}else if(c.indexOf("qiyi.com")>-1){var a=c.match(/com\/(\S*?)\/0/i),r=c.match(/tvId=(\S*?)-/i);if(a){n="http://open.iqiyi.com/developer/player_js/coopPlayerIndex.html?vid="+a[1]+"&tvId="+r[1]+"&accessToken=2.f22860a2479ad60d8da7697274de9346&appKey=3955c3425820435e86d0f4cdfe56f5e7&appId=1368&height=100%&width=100%";(d=document.createElement("iframe")).src=n,l.parentNode.replaceChild(d,l)}else{i=u();l.parentNode.replaceChild(i,l)}}else if(c.indexOf("letv.com")>-1){var o=l.getAttribute("flashvars");a=o.match(/uu=(\S*?)&/i),r=o.match(/vu=(\S*?)&/i),n="http://yuntv.letv.com/bcloud.html?uu="+a[1]+"&vu="+r[1]+"&auto_play=0&width=320&height=240&lang=zh_CN";(d=document.createElement("iframe")).src=n,l.parentNode.replaceChild(d,l)}else{i=u();l.parentNode.replaceChild(i,l)}}var s=document.getElementsByTagName("iframe");for(t=s.length-1;t>=0;t--){var l,c;if(c=(l=s[t]).src){var d;if(c.indexOf("qq.com")>-1)c=n="https://v.qq.com/iframe/player.html?vid="+(a=c.match(/vid=(\S*?)&/i))[1]+"&tiny=0&auto=0";(d=document.createElement("iframe")).src=c,d.frameborder=0,l.parentNode.replaceChild(d,l)}else{i=u();l.parentNode.replaceChild(i,l)}}function u(){var e=document.createElement("div");e.class="videoPlaceholder";var t=document.createElement("div");return t.class="videoForbidden",e.appendChild(t),e}}var B={name:"cnbeta-article",data:function(){return{info:null}},methods:{getArticleContent:function(){var e=this,t=[].concat(L()(location.href.split("/"))).pop();_({url:"article/"+t,success:function(t){"200"===t.status_code.toString()?(e.info=t.result,e.$nextTick(H)):e.$toast({text:"请求出错",duration:2e3})},error:function(){e.$toast({text:"网络错误！",duration:2e3})}})}},mounted:function(){this.getArticleContent()}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.info?n("div",{staticClass:"cnbeta-article-container"},[n("h1",{domProps:{innerHTML:e._s(e.info.title)}}),e._v(" "),n("div",{staticClass:"news-info"},[n("span",{staticClass:"time"},[e._v(e._s(e.info.inputtime))]),e._v(" "),n("span",{staticClass:"source",domProps:{innerHTML:e._s(e.info.source)}})]),e._v(" "),n("summary",{domProps:{innerHTML:e._s(e.info.summary)}}),e._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.info.content)}})]):e._e()},staticRenderFns:[]};var q=n("VU/8")(B,R,!1,function(e){n("CGAw")},null,null).exports;r.default.use(l.a);var M=new l.a({mode:"history",routes:[{path:"/",redirect:"/homepage/m"},{path:"/homepage/pc",name:"HomePage",component:b,meta:{keepAlive:!0}},{path:"/homepage/m",name:"MobileHome",component:T,meta:{keepAlive:!0}},{path:"/article/:sid",name:"Article",component:q}]}),S={name:"Refresh",data:function(){return{visible:!1,loading:!1}},methods:{onClick:function(){this.loading||(this.loading=!0,p.$emit("onRefresh"))}}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"refresh-btn",on:{click:this.onClick}},[t("div",{staticClass:"refresh-icon",class:{"loading-icon":this.loading}})])},staticRenderFns:[]};var I=n("VU/8")(S,F,!1,function(e){n("SU9l")},null,null).exports,O=r.default.extend(I),U=n("qJdI"),V=n.n(U);r.default.config.productionTip=!1,r.default.use(V.a),console.log(a()(r.default)),console.log(r.default.set.toString()),r.default.prototype.$showRefresh=function(e){var t=new O({el:document.createElement("div"),data:e||{}});return t.visible=!0,document.body.appendChild(t.$el),t.$stopLoading=function(){t.loading=!1},t.$disappear=function(){t.loading=!1,t.visible=!1},t.$appear=function(){t.visible=!0},t.$remove=function(){t.$el&&t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el),t.$destroy()},t},new r.default({el:"#app",router:M,components:{App:s},template:"<App/>"})},SU9l:function(e,t){},cFPm:function(e,t){},"emk+":function(e,t){},gics:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.190bd3d2dd301ed72781.js.map