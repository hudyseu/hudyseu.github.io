webpackJsonp([1],{"/KGY":function(e,t){},CGAw:function(e,t){},JQVn:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("aFK5"),r=n.n(i),o=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},a,!1,function(e){n("/KGY")},null,null).exports,c=n("/ocq"),l=n("Gu7T"),d=n.n(l),u=n("mvHQ"),m=n.n(u),f=n("rdLu"),h={name:"PhoneCell",props:{info:Object},data:function(){return{thumb:this.info.thumb}},methods:{cellClicked:function(){this.$router.push("/article/"+this.info.sid)}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"phone-cell-container",on:{click:e.cellClicked}},[n("div",{staticClass:"cell-icon",style:{background:"url("+e.thumb+") no-repeat","background-size":"100% 100%"}}),e._v(" "),n("div",{staticClass:"cell-info"},[n("div",{staticClass:"cell-title",domProps:{innerHTML:e._s(e.info.title)}}),e._v(" "),n("div",{staticClass:"cell-date",domProps:{innerHTML:e._s(e.info.inputtime)}})])])},staticRenderFns:[]};var v=n("VU/8")(h,p,!1,function(e){n("cFPm")},null,null).exports,g=new o.a,_=n("mtWM"),C=n.n(_);C.a.defaults.withCredentials=!0;function $(e){return/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(e.url)?e.url:"http://cnbeta.turling.me/api/"+e.url}function b(e,t){e.then(function(e){e&&e.data?t.success&&t.success(e.data):t.error&&t.error(e)}).catch(function(e){t.error&&t.error(e)})}var y=function(e){b(C.a.get($(e),{params:e.params}),e)};var L={name:"Home",data:function(){return{articleList:[],paginationInfo:{current_page:1,total_page:0,page_size:35},selectedPage:1,refreshBtn:null}},components:{PhoneCell:v},methods:{getArticleList:function(e){var t=this,n=this.articleList[this.articleList.length-1];console.log(m()(n)),y({url:"timeline",params:{last_sid:this.articleList.length?n.sid:0},success:function(e){t.refreshBtn.$stopLoading(),"200"===e.status_code.toString()?(t.articleList=[].concat(d()(t.articleList),d()(e.result)),t.paginationInfo=e.result.pagination):t.$toast({text:"请求出错",duration:2e3})},error:function(){t.refreshBtn.$stopLoading(),t.$toast({text:"网络错误！",duration:2e3})}})}},mounted:function(){var e=this;this.refreshBtn=this.$showRefresh(),g.$on("onRefresh",function(){document.documentElement.scrollTop=0,e.selectedPage=1,e.articleList=[],e.getArticleList()}),this.getArticleList()},activated:function(){var e=this;this.refreshBtn&&this.refreshBtn.$appear(),document.body.onscroll=f.throttle(function(){(document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)+document.body.offsetHeight>=document.body.scrollHeight&&(e.selectedPage=e.selectedPage+1,e.getArticleList())},500)},deactivated:function(){this.refreshBtn.$disappear(),document.body.onscroll=null},beforeDestroy:function(){this.refreshBtn.$remove(),g.$off("onRefresh")}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-content"},[t("div",{staticClass:"article-list"},this._l(this.articleList,function(e){return t("phone-cell",{key:e.sid,attrs:{info:e}})}),1)])},staticRenderFns:[]};var k=n("VU/8")(L,w,!1,function(e){n("JQVn")},null,null).exports;function x(){for(var e=document.getElementsByTagName("embed"),t=e.length-1;t>=0;t--){if((l=(c=e[t]).src).indexOf("youku.com")>-1)if(r=l.match(/sid\/(\w+)/i)){var n="http://player.youku.com/embed/"+r[1];(d=document.createElement("iframe")).src=n,c.parentNode.replaceChild(d,c)}else{var i=u();c.parentNode.replaceChild(i,c)}else if(l.indexOf("qq.com")>-1){if(r=l.match(/vid=(\S*)&/i)){n="https://v.qq.com/iframe/player.html?vid="+r[1]+"&tiny=0&auto=0";(d=document.createElement("iframe")).src=n,c.parentNode.replaceChild(d,c)}else{i=u();c.parentNode.replaceChild(i,c)}}else if(l.indexOf("qiyi.com")>-1){var r=l.match(/com\/(\S*?)\/0/i),o=l.match(/tvId=(\S*?)-/i);if(r){n="http://open.iqiyi.com/developer/player_js/coopPlayerIndex.html?vid="+r[1]+"&tvId="+o[1]+"&accessToken=2.f22860a2479ad60d8da7697274de9346&appKey=3955c3425820435e86d0f4cdfe56f5e7&appId=1368&height=100%&width=100%";(d=document.createElement("iframe")).src=n,c.parentNode.replaceChild(d,c)}else{i=u();c.parentNode.replaceChild(i,c)}}else if(l.indexOf("letv.com")>-1){var a=c.getAttribute("flashvars");r=a.match(/uu=(\S*?)&/i),o=a.match(/vu=(\S*?)&/i),n="http://yuntv.letv.com/bcloud.html?uu="+r[1]+"&vu="+o[1]+"&auto_play=0&width=320&height=240&lang=zh_CN";(d=document.createElement("iframe")).src=n,c.parentNode.replaceChild(d,c)}else{i=u();c.parentNode.replaceChild(i,c)}}var s=document.getElementsByTagName("iframe");for(t=s.length-1;t>=0;t--){var c,l;if(l=(c=s[t]).src){var d;if(l.indexOf("qq.com")>-1)l=n="https://v.qq.com/iframe/player.html?vid="+(r=l.match(/vid=(\S*?)&/i))[1]+"&tiny=0&auto=0";(d=document.createElement("iframe")).src=l,d.frameborder=0,c.parentNode.replaceChild(d,c)}else{i=u();c.parentNode.replaceChild(i,c)}}function u(){var e=document.createElement("div");e.class="videoPlaceholder";var t=document.createElement("div");return t.class="videoForbidden",e.appendChild(t),e}}var A={name:"cnbeta-article",data:function(){return{info:null}},methods:{getArticleContent:function(){var e=this,t=[].concat(d()(location.href.split("/"))).pop();y({url:"article/"+t,success:function(t){"200"===t.status_code.toString()?(e.info=t.result,e.$nextTick(x)):e.$toast({text:"请求出错",duration:2e3})},error:function(){e.$toast({text:"网络错误！",duration:2e3})}})}},mounted:function(){this.getArticleContent()}},N={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.info?n("div",{staticClass:"cnbeta-article-container"},[n("h1",{domProps:{innerHTML:e._s(e.info.title)}}),e._v(" "),n("div",{staticClass:"news-info"},[n("span",{staticClass:"time"},[e._v(e._s(e.info.inputtime))]),e._v(" "),n("span",{staticClass:"source",domProps:{innerHTML:e._s(e.info.source)}})]),e._v(" "),n("summary",{domProps:{innerHTML:e._s(e.info.summary)}}),e._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.info.content)}})]):e._e()},staticRenderFns:[]};var E=n("VU/8")(A,N,!1,function(e){n("CGAw")},null,null).exports;o.a.use(c.a);var P=new c.a({mode:"history",routes:[{path:"/",redirect:"/homepage/m"},{path:"/homepage/m",name:"MobileHome",component:k,meta:{keepAlive:!0}},{path:"/article/:sid",name:"Article",component:E}]}),T={name:"Refresh",data:function(){return{visible:!1,loading:!1}},methods:{onClick:function(){this.loading||(this.loading=!0,g.$emit("onRefresh"))}}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"refresh-btn",on:{click:this.onClick}},[t("div",{staticClass:"refresh-icon",class:{"loading-icon":this.loading}})])},staticRenderFns:[]};var q=n("VU/8")(T,H,!1,function(e){n("SU9l")},null,null).exports,R=o.a.extend(q),S=n("qJdI"),B=n.n(S);o.a.config.productionTip=!1,o.a.use(B.a),console.log(r()(o.a)),console.log(o.a.set.toString()),o.a.prototype.$showRefresh=function(e){var t=new R({el:document.createElement("div"),data:e||{}});return t.visible=!0,document.body.appendChild(t.$el),t.$stopLoading=function(){t.loading=!1},t.$disappear=function(){t.loading=!1,t.visible=!1},t.$appear=function(){t.visible=!0},t.$remove=function(){t.$el&&t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el),t.$destroy()},t},new o.a({el:"#app",router:P,components:{App:s},template:"<App/>"})},SU9l:function(e,t){},cFPm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bf49c3f3e282bb41493a.js.map